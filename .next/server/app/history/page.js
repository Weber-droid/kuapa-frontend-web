(()=>{var e={};e.id=811,e.ids=[811],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},8749:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),a(3147),a(5732),a(5866);var r=a(3191),s=a(8716),l=a(7922),n=a.n(l),i=a(5231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);a.d(t,o);let c=["",{children:["history",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,3147)),"/home/weber/Development/Dev/kuapa-frontend-web/src/app/history/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}]},{layout:[()=>Promise.resolve().then(a.bind(a,5732)),"/home/weber/Development/Dev/kuapa-frontend-web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}],d=["/home/weber/Development/Dev/kuapa-frontend-web/src/app/history/page.tsx"],u="/history/page",h={require:a,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/history/page",pathname:"/history",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},5620:(e,t,a)=>{Promise.resolve().then(a.bind(a,1594))},361:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(5578).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1216:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(5578).Z)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},2714:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(5578).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},9561:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(5578).Z)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},3080:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(5578).Z)("leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]])},8307:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(5578).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},8091:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(5578).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},949:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(5578).Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},1594:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var r=a(326),s=a(7577),l=a(434),n=a(5047);let i=(0,a(5578).Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var o=a(1896),c=a(8307),d=a(9561),u=a(3080),h=a(361),m=a(949),p=a(8091),x=a(1190),g=a(1664),f=a(9752),y=a(8443),b=a(6796),v=a(5342),k=a(1867);function w(){let e=(0,n.useRouter)(),{history:t,removeScan:a}=(0,b.rG)(),[l,u]=(0,s.useState)(""),[h,m]=(0,s.useState)("all"),[p,y]=(0,s.useState)("all"),[w,N]=(0,s.useState)(!1),M=(0,s.useMemo)(()=>t.filter(e=>{if("healthy"===h&&!e.isHealthy||"diseased"===h&&e.isHealthy||"all"!==p&&e.cropType!==p)return!1;if(l){let t=l.toLowerCase(),a=e.detectedDisease?.name.toLowerCase()||"",r=e.cropType.toLowerCase();if(!a.includes(t)&&!r.includes(t))return!1}return!0}),[t,h,p,l]),S=(0,s.useMemo)(()=>{let e={};return M.forEach(t=>{let a;let r=new Date(t.createdAt),s=new Date,l=new Date(s);l.setDate(l.getDate()-1),e[a=r.toDateString()===s.toDateString()?"Today":r.toDateString()===l.toDateString()?"Yesterday":r.toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"})]||(e[a]=[]),e[a].push(t)}),e},[M]),C=(e,t)=>{t.preventDefault(),t.stopPropagation(),a(e)};return 0===t.length?r.jsx("div",{className:"page-content",children:(0,r.jsxs)("div",{className:"flex min-h-[60vh] flex-col items-center justify-center text-center",children:[r.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-full bg-slate-100 dark:bg-slate-800",children:r.jsx(i,{className:"h-10 w-10 text-slate-400"})}),r.jsx("h1",{className:"mt-4 text-xl font-bold text-slate-900 dark:text-white",children:"No Scan History"}),r.jsx("p",{className:"mt-2 text-slate-500 dark:text-slate-400",children:"Start scanning your crops to build your history"}),r.jsx(g.z,{className:"mt-6",onClick:()=>e.push("/scan"),leftIcon:r.jsx(o.Z,{className:"h-5 w-5"}),children:"Start Scanning"})]})}):(0,r.jsxs)("div",{className:"page-content space-y-4",children:[(0,r.jsxs)("div",{className:"sticky top-14 z-30 -mx-4 bg-slate-50 px-4 pb-4 pt-2 dark:bg-slate-900",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx("div",{className:"flex-1",children:r.jsx(x.I,{placeholder:"Search scans...",value:l,onChange:e=>u(e.target.value),leftIcon:r.jsx(c.Z,{className:"h-5 w-5"})})}),r.jsx(g.z,{variant:w?"primary":"secondary",onClick:()=>N(!w),className:"shrink-0",children:r.jsx(d.Z,{className:"h-5 w-5"})})]}),w&&(0,r.jsxs)("div",{className:"mt-3 space-y-3 rounded-xl bg-white p-3 shadow-card dark:bg-slate-800",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"mb-2 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Status"}),r.jsx("div",{className:"flex gap-2",children:["all","healthy","diseased"].map(e=>r.jsx("button",{onClick:()=>m(e),className:(0,k.cn)("rounded-full px-3 py-1.5 text-sm font-medium capitalize transition-colors",h===e?"bg-primary-500 text-white":"bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-400"),children:e},e))})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"mb-2 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Crop Type"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[r.jsx("button",{onClick:()=>y("all"),className:(0,k.cn)("rounded-full px-3 py-1.5 text-sm font-medium transition-colors","all"===p?"bg-primary-500 text-white":"bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-400"),children:"All"}),Object.keys(v.j).map(e=>r.jsx("button",{onClick:()=>y(e),className:(0,k.cn)("rounded-full px-3 py-1.5 text-sm font-medium capitalize transition-colors",p===e?"bg-primary-500 text-white":"bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-400"),children:e},e))]})]})]})]}),(0,r.jsxs)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[M.length," scan",1!==M.length?"s":""," found"]}),M.length>0?r.jsx("div",{className:"space-y-6",children:Object.entries(S).map(([e,t])=>(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"mb-2 text-sm font-semibold text-slate-500 dark:text-slate-400",children:e}),r.jsx(f.Zb,{className:"divide-y divide-slate-100 dark:divide-slate-700",children:t.map(e=>r.jsx(j,{scan:e,onDelete:t=>C(e.id,t)},e.id))})]},e))}):(0,r.jsxs)("div",{className:"flex min-h-[40vh] flex-col items-center justify-center text-center",children:[r.jsx(c.Z,{className:"h-10 w-10 text-slate-400"}),r.jsx("p",{className:"mt-4 font-medium text-slate-900 dark:text-white",children:"No results found"}),r.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:"Try adjusting your search or filters"})]})]})}function j({scan:e,onDelete:t}){let a=new Date(e.createdAt).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"});return(0,r.jsxs)(l.default,{href:`/scan/${e.id}`,className:"flex items-center gap-4 p-4 transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[(0,r.jsxs)("div",{className:"relative h-14 w-14 shrink-0 overflow-hidden rounded-lg bg-slate-100 dark:bg-slate-700",children:[e.thumbnailUrl?r.jsx("img",{src:e.thumbnailUrl,alt:"Scan thumbnail",className:"h-full w-full object-cover"}):r.jsx("div",{className:"flex h-full w-full items-center justify-center",children:r.jsx(u.Z,{className:"h-6 w-6 text-slate-400"})}),r.jsx("div",{className:(0,k.cn)("absolute bottom-1 right-1 h-3 w-3 rounded-full border-2 border-white dark:border-slate-800",e.isHealthy?"bg-success-500":"bg-danger-500")})]}),(0,r.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[e.isHealthy?r.jsx(h.Z,{className:"h-4 w-4 shrink-0 text-success-500"}):r.jsx(m.Z,{className:"h-4 w-4 shrink-0 text-danger-500"}),r.jsx("p",{className:"truncate font-medium text-slate-900 dark:text-white",children:e.isHealthy?"Healthy":e.detectedDisease?.name||"Disease Detected"})]}),(0,r.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[r.jsx(y.as,{cropType:e.cropType}),r.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:a})]})]}),r.jsx("div",{className:"text-right",children:(0,r.jsxs)("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:[e.confidence,"%"]})}),r.jsx("button",{onClick:t,className:"shrink-0 rounded-lg p-2 text-slate-400 hover:bg-slate-100 hover:text-danger-500 dark:hover:bg-slate-700",children:r.jsx(p.Z,{className:"h-4 w-4"})})]})}},8443:(e,t,a)=>{"use strict";a.d(t,{$M:()=>n,Ct:()=>l,as:()=>i});var r=a(326);a(7577);var s=a(1867);function l({className:e,variant:t="default",size:a="md",...l}){return r.jsx("span",{className:(0,s.cn)("inline-flex items-center rounded-full font-medium",{default:"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-300",success:"bg-success-100 text-success-700 dark:bg-success-900/30 dark:text-success-400",warning:"bg-warning-100 text-warning-700 dark:bg-warning-900/30 dark:text-warning-400",danger:"bg-danger-100 text-danger-700 dark:bg-danger-900/30 dark:text-danger-400",info:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"}[t],{sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm"}[a],e),...l})}function n({severity:e,className:t}){let{variant:a,label:s}={low:{variant:"success",label:"Low"},medium:{variant:"warning",label:"Medium"},high:{variant:"danger",label:"High"},critical:{variant:"danger",label:"Critical"}}[e];return(0,r.jsxs)(l,{variant:a,className:t,children:[s," Severity"]})}function i({cropType:e,className:t}){return r.jsx(l,{variant:"default",className:(0,s.cn)("capitalize",t),children:e})}},9752:(e,t,a)=>{"use strict";a.d(t,{Ol:()=>i,Zb:()=>n,aY:()=>c,ll:()=>o});var r=a(326),s=a(7577),l=a(1867);let n=s.forwardRef(({className:e,variant:t="default",...a},s)=>r.jsx("div",{ref:s,className:(0,l.cn)("rounded-xl p-4",{default:"bg-white dark:bg-slate-800 shadow-card",bordered:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700",elevated:"bg-white dark:bg-slate-800 shadow-soft"}[t],e),...a}));n.displayName="Card";let i=s.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:(0,l.cn)("mb-4",e),...t}));i.displayName="CardHeader";let o=s.forwardRef(({className:e,...t},a)=>r.jsx("h3",{ref:a,className:(0,l.cn)("text-lg font-semibold text-slate-900 dark:text-white",e),...t}));o.displayName="CardTitle",s.forwardRef(({className:e,...t},a)=>r.jsx("p",{ref:a,className:(0,l.cn)("text-sm text-slate-500 dark:text-slate-400",e),...t})).displayName="CardDescription";let c=s.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:(0,l.cn)("",e),...t}));c.displayName="CardContent",s.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:(0,l.cn)("mt-4 flex items-center",e),...t})).displayName="CardFooter"},1190:(e,t,a)=>{"use strict";a.d(t,{I:()=>o});var r=a(326),s=a(7577),l=a(1867),n=a(1216),i=a(2714);let o=s.forwardRef(({className:e,type:t,label:a,error:o,hint:c,leftIcon:d,rightIcon:u,id:h,...m},p)=>{let[x,g]=s.useState(!1),f=s.useId(),y=h||f,b="password"===t,v=b&&x?"text":t;return(0,r.jsxs)("div",{className:"w-full",children:[a&&r.jsx("label",{htmlFor:y,className:"mb-1.5 block text-sm font-medium text-slate-700 dark:text-slate-300",children:a}),(0,r.jsxs)("div",{className:"relative",children:[d&&r.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:d}),r.jsx("input",{type:v,id:y,ref:p,className:(0,l.cn)("w-full rounded-lg border bg-white px-4 py-3 text-base transition-colors","focus:outline-none focus:ring-2","dark:bg-slate-800 dark:text-white","placeholder:text-slate-400 dark:placeholder:text-slate-500",d&&"pl-10",(u||b)&&"pr-10",o?"border-danger-500 focus:border-danger-500 focus:ring-danger-500/20":"border-slate-300 focus:border-primary-500 focus:ring-primary-500/20 dark:border-slate-600 dark:focus:border-primary-500",e),...m}),b&&r.jsx("button",{type:"button",onClick:()=>g(!x),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",tabIndex:-1,children:x?r.jsx(n.Z,{className:"h-5 w-5"}):r.jsx(i.Z,{className:"h-5 w-5"})}),u&&!b&&r.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400",children:u})]}),o&&r.jsx("p",{className:"mt-1.5 text-sm text-danger-500",children:o}),c&&!o&&r.jsx("p",{className:"mt-1.5 text-sm text-slate-500 dark:text-slate-400",children:c})]})});o.displayName="Input"},6796:(e,t,a)=>{"use strict";a.d(t,{rG:()=>p});var r=a(8408),s=a(5251),l=a(4679);let n="app-state",i=(0,l.X3)("kuapa-db",1,{upgrade(e){e.objectStoreNames.contains(n)||e.createObjectStore(n)}}),o={getItem:async e=>{try{return await (await i).get(n,e)||null}catch(e){return console.error("Error getting item from IndexedDB:",e),null}},setItem:async(e,t)=>{try{await (await i).put(n,t,e)}catch(e){console.error("Error setting item in IndexedDB:",e)}},removeItem:async e=>{try{await (await i).delete(n,e)}catch(e){console.error("Error removing item from IndexedDB:",e)}}};var c=a(1597);let d=async(e,t)=>{await u();let a=(0,c.Ft)(t),r=Math.random()>.3,s=null,l=0,n=[];return!r&&a.length>0?(s=a[Math.floor(Math.random()*a.length)],l=Math.floor(23*Math.random())+75,n=h(s)):(l=Math.floor(15*Math.random())+85,n=m(t)),{id:`scan_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,userId:"current_user",imageUrl:e,thumbnailUrl:e,cropType:t,detectedDisease:s,confidence:l,isHealthy:r,recommendations:n,createdAt:new Date().toISOString()}},u=()=>new Promise(e=>{setTimeout(e,1500+1500*Math.random())}),h=e=>{let t=[];return"critical"===e.severity?t.push("URGENT: Immediate action required to prevent spread"):"high"===e.severity&&t.push("Take action within the next few days"),e.treatment.cultural.length>0&&t.push(e.treatment.cultural[0]),e.treatment.organic.length>0&&t.push(e.treatment.organic[0]),e.prevention.length>0&&t.push(`Prevention: ${e.prevention[0]}`),("critical"===e.severity||"high"===e.severity)&&t.push("Consult with local agricultural extension officer for detailed guidance"),t},m=e=>{let t={cocoa:["Your cocoa plant looks healthy! Continue regular monitoring","Maintain proper pruning to ensure good air circulation","Apply balanced fertilizer during the growing season","Remove any debris around the tree base"],cassava:["Your cassava plant appears healthy! Keep up the good work","Continue weeding to reduce pest habitat","Monitor for whiteflies regularly","Ensure proper spacing for next planting"],maize:["Your maize crop looks healthy! Continue current practices","Monitor for signs of streak virus as plants grow","Apply nitrogen fertilizer at knee-high stage if needed","Scout for stem borers regularly"],plantain:["Your plantain looks healthy! Maintain current care","Continue regular de-suckering practices","Apply mulch around the base","Monitor older leaves for early disease signs"],rice:["Your rice crop appears healthy","Maintain proper water levels","Monitor for blast disease symptoms","Apply fertilizer according to growth stage"],tomato:["Your tomato plant looks healthy","Stake plants for better support","Water at the base to prevent leaf diseases","Remove lower leaves as fruits develop"],pepper:["Your pepper plant appears healthy","Ensure consistent watering","Monitor for aphids and whiteflies","Apply mulch to retain moisture"],other:["Your crop appears healthy","Continue regular monitoring","Maintain good agricultural practices","Consult extension services for specific advice"]};return t[e]||t.other},p=(0,r.U)()((0,s.tJ)((e,t)=>({currentScan:null,history:[],isScanning:!1,error:null,startScan:async(a,r)=>{e({isScanning:!0,error:null,currentScan:null});try{let s=await d(a,r);return e({currentScan:s,isScanning:!1}),t().addScanToHistory(s),s}catch(t){throw e({isScanning:!1,error:t instanceof Error?t.message:"Scan failed"}),t}},addScanToHistory:t=>{e(e=>({history:[t,...e.history].slice(0,100)}))},removeScan:t=>{e(e=>({history:e.history.filter(e=>e.id!==t),currentScan:e.currentScan?.id===t?null:e.currentScan}))},clearHistory:()=>{e({history:[],currentScan:null})},getScanById:e=>{let{history:a}=t();return a.find(t=>t.id===e)},setError:t=>{e({error:t})},clearError:()=>{e({error:null})}}),{name:"kuapa-scans",storage:(0,s.FL)(()=>o),partialize:e=>({history:e.history})}))},5342:(e,t,a)=>{"use strict";a.d(t,{j:()=>r});let r={cocoa:"Cocoa",cassava:"Cassava",maize:"Maize",plantain:"Plantain",rice:"Rice",tomato:"Tomato",pepper:"Pepper",other:"Other"}},3147:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(8570).createProxy)(String.raw`/home/weber/Development/Dev/kuapa-frontend-web/src/app/history/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[948,86,621,584,627],()=>a(8749));module.exports=r})();