(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[398],{944:function(e,t,a){Promise.resolve().then(a.bind(a,5039))},3581:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(8755).Z)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},401:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(8755).Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},9547:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(8755).Z)("leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]])},5039:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Z}});var r=a(7437),s=a(2265),l=a(9376),n=a(8755);let i=(0,n.Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var c=a(3581);let o=(0,n.Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var d=a(9547);let u=(0,n.Z)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),h=(0,n.Z)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var m=a(2381),x=a(9820);let p=(0,n.Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),f=(0,n.Z)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),g=(0,n.Z)("zap-off",[["path",{d:"M10.513 4.856 13.12 2.17a.5.5 0 0 1 .86.46l-1.377 4.317",key:"193nxd"}],["path",{d:"M15.656 10H20a1 1 0 0 1 .78 1.63l-1.72 1.773",key:"27a7lr"}],["path",{d:"M16.273 16.273 10.88 21.83a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14H4a1 1 0 0 1-.78-1.63l4.507-4.643",key:"1e0qe9"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),y=(0,n.Z)("switch-camera",[["path",{d:"M11 19H4a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h5",key:"mtk2lu"}],["path",{d:"M13 5h7a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-5",key:"120jsl"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"m18 22-3-3 3-3",key:"kgdoj7"}],["path",{d:"m6 2 3 3-3 3",key:"1fnbkv"}]]),b=(0,n.Z)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var v=a(1001);function w(e){let{onCapture:t,onClose:a}=e,l=(0,s.useRef)(null),n=(0,s.useRef)(null),i=(0,s.useRef)(null),o=(0,s.useRef)(null),[d,u]=(0,s.useState)(!1),[h,x]=(0,s.useState)("environment"),[w,j]=(0,s.useState)(!1),[k,N]=(0,s.useState)(!1),[C,S]=(0,s.useState)(null),[M,z]=(0,s.useState)(!1),D=(0,s.useCallback)(async()=>{try{var e;S(null),i.current&&i.current.getTracks().forEach(e=>e.stop());let t=await navigator.mediaDevices.getUserMedia({video:{facingMode:h,width:{ideal:1920},height:{ideal:1080}},audio:!1});i.current=t,l.current&&(l.current.srcObject=t,await l.current.play(),u(!0));let a=t.getVideoTracks()[0],r=null===(e=a.getCapabilities)||void 0===e?void 0:e.call(a);N(!!(null==r?void 0:r.torch))}catch(e){console.error("Camera error:",e),e instanceof Error&&("NotAllowedError"===e.name?S("Camera access denied. Please enable camera permissions in your browser settings."):"NotFoundError"===e.name?S("No camera found on this device."):S("Unable to access camera. Please try again."))}},[h]),R=(0,s.useCallback)(()=>{i.current&&(i.current.getTracks().forEach(e=>e.stop()),i.current=null),u(!1)},[]),E=(0,s.useCallback)(async()=>{if(!i.current||!k)return;let e=i.current.getVideoTracks()[0];try{await e.applyConstraints({advanced:[{torch:!w}]}),j(!w)}catch(e){console.error("Flash toggle error:",e)}},[w,k]),Z=(0,s.useCallback)(()=>{x(e=>"user"===e?"environment":"user")},[]),I=(0,s.useCallback)(()=>{if(!l.current||!n.current||!d)return;z(!0);let e=l.current,a=n.current;a.width=e.videoWidth,a.height=e.videoHeight;let r=a.getContext("2d");if(!r)return;r.drawImage(e,0,0);let s=a.toDataURL("image/jpeg",.9);R(),t(s),z(!1)},[d,t,R]),A=(0,s.useCallback)(e=>{var a;let r=null===(a=e.target.files)||void 0===a?void 0:a[0];if(!r)return;let s=new FileReader;s.onload=e=>{var a;let r=null===(a=e.target)||void 0===a?void 0:a.result;R(),t(r)},s.readAsDataURL(r)},[t,R]);return(0,s.useEffect)(()=>(D(),()=>R()),[D,R,d]),(0,s.useEffect)(()=>{d&&D()},[h]),(0,r.jsx)("div",{className:"fixed inset-0 z-50 bg-black",children:(0,r.jsxs)("div",{className:"relative h-full w-full",children:[(0,r.jsx)("video",{ref:l,autoPlay:!0,playsInline:!0,muted:!0,className:(0,v.cn)("h-full w-full object-cover","user"===h&&"scale-x-[-1]")}),(0,r.jsx)("canvas",{ref:n,className:"hidden"}),C&&(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/80 p-6",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-danger-500/20",children:(0,r.jsx)(c.Z,{className:"h-8 w-8 text-danger-500"})}),(0,r.jsx)("p",{className:"text-white",children:C}),(0,r.jsxs)("div",{className:"mt-6 flex justify-center gap-3",children:[(0,r.jsx)(m.z,{variant:"secondary",onClick:a,children:"Cancel"}),(0,r.jsx)(m.z,{onClick:D,children:"Try Again"})]})]})}),!d&&!C&&(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"mx-auto h-12 w-12 animate-spin rounded-full border-4 border-primary-500 border-t-transparent"}),(0,r.jsx)("p",{className:"mt-4 text-white",children:"Starting camera..."})]})}),d&&(0,r.jsx)("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center p-8",children:(0,r.jsxs)("div",{className:"relative aspect-square w-full max-w-sm",children:[(0,r.jsx)("div",{className:"absolute left-0 top-0 h-8 w-8 border-l-4 border-t-4 border-white/60"}),(0,r.jsx)("div",{className:"absolute right-0 top-0 h-8 w-8 border-r-4 border-t-4 border-white/60"}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 h-8 w-8 border-b-4 border-l-4 border-white/60"}),(0,r.jsx)("div",{className:"absolute bottom-0 right-0 h-8 w-8 border-b-4 border-r-4 border-white/60"}),(0,r.jsx)("div",{className:"absolute inset-0 overflow-hidden",children:(0,r.jsx)("div",{className:"animate-scan h-0.5 w-full bg-gradient-to-r from-transparent via-primary-500 to-transparent"})})]})}),(0,r.jsxs)("div",{className:"absolute left-0 right-0 top-0 flex items-center justify-between p-4 safe-top",children:[(0,r.jsx)("button",{onClick:a,className:"flex h-10 w-10 items-center justify-center rounded-full bg-black/50 text-white",children:(0,r.jsx)(p,{className:"h-6 w-6"})}),(0,r.jsxs)("div",{className:"flex gap-2",children:[k&&(0,r.jsx)("button",{onClick:E,className:(0,v.cn)("flex h-10 w-10 items-center justify-center rounded-full",w?"bg-yellow-500 text-black":"bg-black/50 text-white"),children:w?(0,r.jsx)(f,{className:"h-5 w-5"}):(0,r.jsx)(g,{className:"h-5 w-5"})}),(0,r.jsx)("button",{onClick:Z,className:"flex h-10 w-10 items-center justify-center rounded-full bg-black/50 text-white",children:(0,r.jsx)(y,{className:"h-5 w-5"})})]})]}),(0,r.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-6 safe-bottom",children:[(0,r.jsx)("p",{className:"mb-4 text-center text-sm text-white/80",children:"Position the affected crop area within the frame"}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-8",children:[(0,r.jsx)("button",{onClick:()=>{var e;return null===(e=o.current)||void 0===e?void 0:e.click()},className:"flex h-12 w-12 items-center justify-center rounded-full bg-white/20 text-white",children:(0,r.jsx)(b,{className:"h-6 w-6"})}),(0,r.jsx)("input",{ref:o,type:"file",accept:"image/*",capture:"environment",onChange:A,className:"hidden"}),(0,r.jsx)("button",{onClick:I,disabled:!d||M,className:(0,v.cn)("flex h-20 w-20 items-center justify-center rounded-full border-4 border-white","transition-transform active:scale-95",M&&"animate-pulse"),children:(0,r.jsx)("div",{className:"h-16 w-16 rounded-full bg-white"})}),(0,r.jsx)("div",{className:"h-12 w-12"})]})]})]})})}var j=a(6481),k=a(401);let N={cocoa:"\uD83C\uDF6B",cassava:"\uD83E\uDD54",maize:"\uD83C\uDF3D",plantain:"\uD83C\uDF4C",rice:"\uD83C\uDF3E",tomato:"\uD83C\uDF45",pepper:"\uD83C\uDF36️",other:"\uD83C\uDF3F"};function C(e){let{selectedCrop:t,onSelect:a,className:s}=e,l=Object.entries(j.j);return(0,r.jsx)("div",{className:(0,v.cn)("grid grid-cols-4 gap-2",s),children:l.map(e=>{let[s,l]=e;return(0,r.jsxs)("button",{onClick:()=>a(s),className:(0,v.cn)("relative flex flex-col items-center gap-1 rounded-xl p-3 transition-all",t===s?"bg-primary-500 text-white shadow-md":"bg-white text-slate-600 shadow-card hover:bg-slate-50 dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-700"),children:[(0,r.jsx)("span",{className:"text-2xl",children:N[s]}),(0,r.jsx)("span",{className:"text-xs font-medium",children:l}),t===s&&(0,r.jsx)("div",{className:"absolute -right-1 -top-1 flex h-5 w-5 items-center justify-center rounded-full bg-white shadow",children:(0,r.jsx)(k.Z,{className:"h-3 w-3 text-primary-500"})})]},s)})})}function S(e){let{progress:t,stage:a}=e;return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-6",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 animate-ping rounded-full bg-primary-400 opacity-20"}),(0,r.jsx)("div",{className:"relative flex h-24 w-24 items-center justify-center rounded-full bg-primary-500",children:(0,r.jsx)("svg",{className:"h-12 w-12 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),void 0!==t&&(0,r.jsx)("div",{className:"w-48",children:(0,r.jsx)("div",{className:"h-2 w-full overflow-hidden rounded-full bg-slate-200 dark:bg-slate-700",children:(0,r.jsx)("div",{className:"h-full rounded-full bg-primary-500 transition-all duration-300",style:{width:"".concat(t,"%")}})})}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-lg font-medium text-slate-900 dark:text-white",children:a}),(0,r.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Please wait while we analyze your crop"})]})]})}var M=a(5598);let z={maxWidth:1920,maxHeight:1920,quality:.8,format:"jpeg"},D=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={...z,...t};return new Promise((t,r)=>{let s=new Image,l=URL.createObjectURL(e);s.onload=()=>{URL.revokeObjectURL(l);let{width:e,height:n}=s,i=e/n;e>a.maxWidth&&(n=(e=a.maxWidth)/i),n>a.maxHeight&&(e=(n=a.maxHeight)*i);let c=document.createElement("canvas");c.width=e,c.height=n;let o=c.getContext("2d");if(!o){r(Error("Could not get canvas context"));return}o.imageSmoothingEnabled=!0,o.imageSmoothingQuality="high",o.drawImage(s,0,0,e,n);let d="webp"===a.format?"image/webp":"image/jpeg";c.toBlob(e=>{e?t(e):r(Error("Could not compress image"))},d,a.quality)},s.onerror=()=>{URL.revokeObjectURL(l),r(Error("Could not load image"))},s.src=l})},R=e=>new Promise((t,a)=>{let r=new FileReader;r.onload=()=>t(r.result),r.onerror=a,r.readAsDataURL(e)}),E=async e=>(await fetch(e)).blob();function Z(){let e=(0,l.useRouter)(),{startScan:t,isScanning:a}=(0,M.rG)(),[n,p]=(0,s.useState)("select"),[f,g]=(0,s.useState)(null),[y,b]=(0,s.useState)(null),[j,k]=(0,s.useState)("Initializing..."),[N,z]=(0,s.useState)(null),Z=(0,s.useCallback)(async e=>{try{let t=await E(e),a=await D(t,{maxWidth:1280,maxHeight:1280,quality:.85}),r=await R(a);b(r),p("preview")}catch(t){console.error("Image compression error:",t),b(e),p("preview")}},[]),I=(0,s.useCallback)(async e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a)try{let e=await D(a,{maxWidth:1280,maxHeight:1280,quality:.85}),t=await R(e);b(t),p("preview")}catch(e){console.error("Upload error:",e)}},[]),A=(0,s.useCallback)(async()=>{if(!y||!f)return;p("scanning"),z(null);let a=["Analyzing image...","Detecting patterns...","Identifying disease...","Generating recommendations..."];try{for(let e=0;e<a.length;e++)k(a[e]),await new Promise(e=>setTimeout(e,500));let r=await t(y,f);e.push("/scan/".concat(r.id))}catch(e){console.error("Scan error:",e),z(e instanceof Error?e.message:"Scan failed. Please try again."),p("error")}},[y,f,t,e]),F=(0,s.useCallback)(()=>{b(null),g(null),z(null),p("select")},[]),U=(0,s.useCallback)(()=>{b(null),p("camera")},[]);return"camera"===n?(0,r.jsx)(w,{onCapture:Z,onClose:()=>p("select")}):"scanning"===n?(0,r.jsx)("div",{className:"flex min-h-[80vh] items-center justify-center p-6",children:(0,r.jsx)(S,{stage:j})}):"error"===n?(0,r.jsx)("div",{className:"page-content",children:(0,r.jsxs)("div",{className:"flex min-h-[60vh] flex-col items-center justify-center text-center",children:[(0,r.jsx)("div",{className:"flex h-20 w-20 items-center justify-center rounded-full bg-danger-100 dark:bg-danger-900/30",children:(0,r.jsx)(i,{className:"h-10 w-10 text-danger-500"})}),(0,r.jsx)("h2",{className:"mt-4 text-xl font-bold text-slate-900 dark:text-white",children:"Scan Failed"}),(0,r.jsx)("p",{className:"mt-2 text-slate-500 dark:text-slate-400",children:N||"Something went wrong. Please try again."}),(0,r.jsxs)("div",{className:"mt-6 flex gap-3",children:[(0,r.jsx)(m.z,{variant:"secondary",onClick:F,children:"Start Over"}),(0,r.jsx)(m.z,{onClick:()=>p("preview"),children:"Try Again"})]})]})}):(0,r.jsxs)("div",{className:"page-content space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:["select"===n&&"Scan Your Crop","preview"===n&&"Review Image"]}),(0,r.jsxs)("p",{className:"mt-1 text-slate-500 dark:text-slate-400",children:["select"===n&&"Select your crop type and take a photo","preview"===n&&"Confirm the image looks clear"]})]}),"select"===n&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(x.Zb,{className:"p-4",children:[(0,r.jsx)("h2",{className:"mb-3 font-semibold text-slate-900 dark:text-white",children:"What crop are you scanning?"}),(0,r.jsx)(C,{selectedCrop:f,onSelect:g})]}),(0,r.jsxs)(x.Zb,{className:"p-4",children:[(0,r.jsx)("h2",{className:"mb-3 font-semibold text-slate-900 dark:text-white",children:"Capture Image"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsx)(m.z,{variant:"primary",size:"lg",className:"h-auto flex-col gap-2 py-6",onClick:()=>p("camera"),disabled:!f,leftIcon:(0,r.jsx)(c.Z,{className:"h-6 w-6"}),children:(0,r.jsx)("span",{children:"Take Photo"})}),(0,r.jsxs)("label",{className:(0,v.cn)("btn btn-secondary flex h-auto cursor-pointer flex-col gap-2 py-6",!f&&"opacity-50 cursor-not-allowed"),children:[(0,r.jsx)(o,{className:"h-6 w-6"}),(0,r.jsx)("span",{children:"Upload Image"}),(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:I,disabled:!f,className:"hidden"})]})]})]}),(0,r.jsx)("div",{className:"rounded-xl border border-slate-200 bg-white p-4 dark:border-slate-700 dark:bg-slate-800",children:(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-primary-100 dark:bg-primary-900/30",children:(0,r.jsx)(d.Z,{className:"h-4 w-4 text-primary-600 dark:text-primary-400"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium text-slate-900 dark:text-white",children:"Tips for best results"}),(0,r.jsxs)("ul",{className:"mt-2 space-y-1 text-sm text-slate-500 dark:text-slate-400",children:[(0,r.jsx)("li",{children:"• Use natural daylight if possible"}),(0,r.jsx)("li",{children:"• Focus on the affected area"}),(0,r.jsx)("li",{children:"• Keep the camera steady"}),(0,r.jsx)("li",{children:"• Include both healthy and affected parts"})]})]})]})})]}),"preview"===n&&y&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"relative overflow-hidden rounded-2xl bg-slate-100 dark:bg-slate-800",children:[(0,r.jsx)("img",{src:y,alt:"Captured crop",className:"aspect-square w-full object-cover"}),(0,r.jsxs)("button",{onClick:U,className:"absolute bottom-3 right-3 flex items-center gap-2 rounded-full bg-black/50 px-3 py-2 text-sm font-medium text-white backdrop-blur",children:[(0,r.jsx)(u,{className:"h-4 w-4"}),"Retake"]})]}),f&&(0,r.jsx)(x.Zb,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Crop type"}),(0,r.jsx)("p",{className:"font-semibold capitalize text-slate-900 dark:text-white",children:f})]}),(0,r.jsx)(m.z,{variant:"ghost",size:"sm",onClick:()=>p("select"),children:"Change"})]})}),(0,r.jsx)(m.z,{size:"lg",className:"w-full",onClick:A,disabled:a,rightIcon:(0,r.jsx)(h,{className:"h-5 w-5"}),children:"Analyze for Diseases"})]})]})}},9820:function(e,t,a){"use strict";a.d(t,{Ol:function(){return i},Zb:function(){return n},aY:function(){return o},ll:function(){return c}});var r=a(7437),s=a(2265),l=a(1001);let n=s.forwardRef((e,t)=>{let{className:a,variant:s="default",...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("rounded-xl p-4",{default:"bg-white dark:bg-slate-800 shadow-card",bordered:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700",elevated:"bg-white dark:bg-slate-800 shadow-soft"}[s],a),...n})});n.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("mb-4",a),...s})});i.displayName="CardHeader";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h3",{ref:t,className:(0,l.cn)("text-lg font-semibold text-slate-900 dark:text-white",a),...s})});c.displayName="CardTitle",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-slate-500 dark:text-slate-400",a),...s})}).displayName="CardDescription";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("",a),...s})});o.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("mt-4 flex items-center",a),...s})}).displayName="CardFooter"},5598:function(e,t,a){"use strict";a.d(t,{rG:function(){return x}});var r=a(3011),s=a(6885),l=a(960);let n="app-state",i=(0,l.X3)("kuapa-db",1,{upgrade(e){e.objectStoreNames.contains(n)||e.createObjectStore(n)}}),c={getItem:async e=>{try{return await (await i).get(n,e)||null}catch(e){return console.error("Error getting item from IndexedDB:",e),null}},setItem:async(e,t)=>{try{await (await i).put(n,t,e)}catch(e){console.error("Error setting item in IndexedDB:",e)}},removeItem:async e=>{try{await (await i).delete(n,e)}catch(e){console.error("Error removing item from IndexedDB:",e)}}};var o=a(8532);let d=async(e,t)=>{await u();let a=(0,o.Ft)(t),r=Math.random()>.3,s=null,l=0,n=[];return!r&&a.length>0?(s=a[Math.floor(Math.random()*a.length)],l=Math.floor(23*Math.random())+75,n=h(s)):(l=Math.floor(15*Math.random())+85,n=m(t)),{id:"scan_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),userId:"current_user",imageUrl:e,thumbnailUrl:e,cropType:t,detectedDisease:s,confidence:l,isHealthy:r,recommendations:n,createdAt:new Date().toISOString()}},u=()=>new Promise(e=>{setTimeout(e,1500+1500*Math.random())}),h=e=>{let t=[];return"critical"===e.severity?t.push("URGENT: Immediate action required to prevent spread"):"high"===e.severity&&t.push("Take action within the next few days"),e.treatment.cultural.length>0&&t.push(e.treatment.cultural[0]),e.treatment.organic.length>0&&t.push(e.treatment.organic[0]),e.prevention.length>0&&t.push("Prevention: ".concat(e.prevention[0])),("critical"===e.severity||"high"===e.severity)&&t.push("Consult with local agricultural extension officer for detailed guidance"),t},m=e=>{let t={cocoa:["Your cocoa plant looks healthy! Continue regular monitoring","Maintain proper pruning to ensure good air circulation","Apply balanced fertilizer during the growing season","Remove any debris around the tree base"],cassava:["Your cassava plant appears healthy! Keep up the good work","Continue weeding to reduce pest habitat","Monitor for whiteflies regularly","Ensure proper spacing for next planting"],maize:["Your maize crop looks healthy! Continue current practices","Monitor for signs of streak virus as plants grow","Apply nitrogen fertilizer at knee-high stage if needed","Scout for stem borers regularly"],plantain:["Your plantain looks healthy! Maintain current care","Continue regular de-suckering practices","Apply mulch around the base","Monitor older leaves for early disease signs"],rice:["Your rice crop appears healthy","Maintain proper water levels","Monitor for blast disease symptoms","Apply fertilizer according to growth stage"],tomato:["Your tomato plant looks healthy","Stake plants for better support","Water at the base to prevent leaf diseases","Remove lower leaves as fruits develop"],pepper:["Your pepper plant appears healthy","Ensure consistent watering","Monitor for aphids and whiteflies","Apply mulch to retain moisture"],other:["Your crop appears healthy","Continue regular monitoring","Maintain good agricultural practices","Consult extension services for specific advice"]};return t[e]||t.other},x=(0,r.U)()((0,s.tJ)((e,t)=>({currentScan:null,history:[],isScanning:!1,error:null,startScan:async(a,r)=>{e({isScanning:!0,error:null,currentScan:null});try{let s=await d(a,r);return e({currentScan:s,isScanning:!1}),t().addScanToHistory(s),s}catch(t){throw e({isScanning:!1,error:t instanceof Error?t.message:"Scan failed"}),t}},addScanToHistory:t=>{e(e=>({history:[t,...e.history].slice(0,100)}))},removeScan:t=>{e(e=>{var a;return{history:e.history.filter(e=>e.id!==t),currentScan:(null===(a=e.currentScan)||void 0===a?void 0:a.id)===t?null:e.currentScan}})},clearHistory:()=>{e({history:[],currentScan:null})},getScanById:e=>{let{history:a}=t();return a.find(t=>t.id===e)},setError:t=>{e({error:t})},clearError:()=>{e({error:null})}}),{name:"kuapa-scans",storage:(0,s.FL)(()=>c),partialize:e=>({history:e.history})}))},6481:function(e,t,a){"use strict";a.d(t,{j:function(){return r}});let r={cocoa:"Cocoa",cassava:"Cassava",maize:"Maize",plantain:"Plantain",rice:"Rice",tomato:"Tomato",pepper:"Pepper",other:"Other"}}},function(e){e.O(0,[697,778,882,971,117,744],function(){return e(e.s=944)}),_N_E=e.O()}]);