(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{1068:function(e,t,a){Promise.resolve().then(a.bind(a,7099))},4766:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(8755).Z)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]])},407:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(8755).Z)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},5685:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(8755).Z)("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},7692:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(8755).Z)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},9345:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(8755).Z)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},3774:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(8755).Z)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},3041:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(8755).Z)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])},8906:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(8755).Z)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},5787:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(8755).Z)("tractor",[["path",{d:"m10 11 11 .9a1 1 0 0 1 .8 1.1l-.665 4.158a1 1 0 0 1-.988.842H20",key:"she1j9"}],["path",{d:"M16 18h-5",key:"bq60fd"}],["path",{d:"M18 5a1 1 0 0 0-1 1v5.573",key:"1kv8ia"}],["path",{d:"M3 4h8.129a1 1 0 0 1 .99.863L13 11.246",key:"1q1ert"}],["path",{d:"M4 11V4",key:"9ft8pt"}],["path",{d:"M7 15h.01",key:"k5ht0j"}],["path",{d:"M8 10.1V4",key:"1jgyzo"}],["circle",{cx:"18",cy:"18",r:"2",key:"1emm8v"}],["circle",{cx:"7",cy:"15",r:"5",key:"ddtuc"}]])},8930:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(8755).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},2369:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(8755).Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},7099:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return w}});var r=a(7437),s=a(2265),n=a(9376),l=a(2369),i=a(9345),c=a(3041),o=a(3774),d=a(5787),u=a(4766);let h=(0,a(8755).Z)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var m=a(8906),x=a(5685),p=a(8930),f=a(7692),g=a(407),y=a(2381),v=a(9820),k=a(9174),b=a(6154),j=a(5598);function w(){let e=(0,n.useRouter)(),{user:t,isAuthenticated:a,logout:g}=(0,b.t)(),{history:w,clearHistory:M}=(0,j.rG)(),[Z,A]=(0,s.useState)(!1),[L,T]=(0,s.useState)(!1);return a&&t?(0,r.jsxs)("div",{className:"page-content space-y-6",children:[(0,r.jsxs)(v.Zb,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-primary-100 dark:bg-primary-900/30",children:t.avatar?(0,r.jsx)("img",{src:t.avatar,alt:t.name,className:"h-full w-full rounded-full object-cover"}):(0,r.jsx)("span",{className:"text-2xl font-bold text-primary-600 dark:text-primary-400",children:t.name.charAt(0).toUpperCase()})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h1",{className:"text-xl font-bold text-slate-900 dark:text-white",children:t.name}),(0,r.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:t.email}),t.farmName&&(0,r.jsx)("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:t.farmName})]})]}),(0,r.jsxs)("div",{className:"mt-6 flex justify-around border-t border-slate-100 pt-4 dark:border-slate-700",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:w.length}),(0,r.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Total Scans"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:t.cropTypes.length}),(0,r.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Crop Types"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:w.filter(e=>e.isHealthy).length}),(0,r.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Healthy"})]})]})]}),(0,r.jsxs)(v.Zb,{children:[(0,r.jsx)("div",{className:"border-b border-slate-100 p-4 dark:border-slate-700",children:(0,r.jsx)("h2",{className:"font-semibold text-slate-900 dark:text-white",children:"Farm Details"})}),(0,r.jsxs)("div",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:[(0,r.jsx)(N,{icon:l.Z,label:"Name",value:t.name}),(0,r.jsx)(N,{icon:i.Z,label:"Email",value:t.email}),t.phone&&(0,r.jsx)(N,{icon:c.Z,label:"Phone",value:t.phone}),t.location&&(0,r.jsx)(N,{icon:o.Z,label:"Location",value:t.location}),t.farmName&&(0,r.jsx)(N,{icon:d.Z,label:"Farm Name",value:t.farmName})]}),t.cropTypes.length>0&&(0,r.jsxs)("div",{className:"border-t border-slate-100 p-4 dark:border-slate-700",children:[(0,r.jsx)("p",{className:"mb-2 text-sm font-medium text-slate-500 dark:text-slate-400",children:"Crops"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:t.cropTypes.map(e=>(0,r.jsx)(k.as,{cropType:e},e))})]})]}),(0,r.jsxs)(v.Zb,{children:[(0,r.jsx)("div",{className:"border-b border-slate-100 p-4 dark:border-slate-700",children:(0,r.jsx)("h2",{className:"font-semibold text-slate-900 dark:text-white",children:"Settings"})}),(0,r.jsxs)("div",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:[(0,r.jsx)(S,{icon:u.Z,label:"Notifications",onClick:()=>e.push("/notifications")}),(0,r.jsx)(S,{icon:h,label:"General Settings",onClick:()=>e.push("/settings")}),(0,r.jsx)(S,{icon:m.Z,label:"Privacy & Security",onClick:()=>e.push("/settings")}),(0,r.jsx)(S,{icon:x.Z,label:"Help & Support",onClick:()=>e.push("/settings")})]})]}),(0,r.jsxs)(v.Zb,{children:[(0,r.jsx)("div",{className:"border-b border-slate-100 p-4 dark:border-slate-700",children:(0,r.jsx)("h2",{className:"font-semibold text-slate-900 dark:text-white",children:"Data Management"})}),(0,r.jsxs)("div",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:[(0,r.jsxs)("button",{onClick:()=>T(!0),className:"flex w-full items-center gap-3 p-4 text-left text-danger-600 transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[(0,r.jsx)(p.Z,{className:"h-5 w-5"}),(0,r.jsx)("span",{className:"font-medium",children:"Clear Scan History"})]}),(0,r.jsxs)("button",{onClick:()=>A(!0),className:"flex w-full items-center gap-3 p-4 text-left text-danger-600 transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[(0,r.jsx)(f.Z,{className:"h-5 w-5"}),(0,r.jsx)("span",{className:"font-medium",children:"Sign Out"})]})]})]}),Z&&(0,r.jsx)(C,{title:"Sign Out",message:"Are you sure you want to sign out?",confirmLabel:"Sign Out",onConfirm:()=>{g(),e.push("/login")},onCancel:()=>A(!1)}),L&&(0,r.jsx)(C,{title:"Clear Scan History",message:"This will permanently delete all your scan history. This action cannot be undone.",confirmLabel:"Clear History",onConfirm:()=>{M(),T(!1)},onCancel:()=>T(!1),variant:"danger"}),(0,r.jsx)("p",{className:"text-center text-xs text-slate-400 dark:text-slate-500",children:"Kuapa v1.0.0"})]}):(0,r.jsx)("div",{className:"page-content",children:(0,r.jsxs)("div",{className:"flex min-h-[60vh] flex-col items-center justify-center text-center",children:[(0,r.jsx)("div",{className:"flex h-20 w-20 items-center justify-center rounded-full bg-slate-100 dark:bg-slate-800",children:(0,r.jsx)(l.Z,{className:"h-10 w-10 text-slate-400"})}),(0,r.jsx)("h1",{className:"mt-4 text-xl font-bold text-slate-900 dark:text-white",children:"Sign in to view your profile"}),(0,r.jsx)("p",{className:"mt-2 text-slate-500 dark:text-slate-400",children:"Create an account to save your scans and preferences"}),(0,r.jsxs)("div",{className:"mt-6 flex gap-3",children:[(0,r.jsx)(y.z,{onClick:()=>e.push("/signup"),children:"Create Account"}),(0,r.jsx)(y.z,{variant:"outline",onClick:()=>e.push("/login"),children:"Sign In"})]})]})})}function N(e){let{icon:t,label:a,value:s}=e;return(0,r.jsxs)("div",{className:"flex items-center gap-3 p-4",children:[(0,r.jsx)(t,{className:"h-5 w-5 text-slate-400"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:a}),(0,r.jsx)("p",{className:"font-medium text-slate-900 dark:text-white",children:s})]})]})}function S(e){let{icon:t,label:a,value:s,onClick:n}=e;return(0,r.jsxs)("button",{onClick:n,className:"flex w-full items-center gap-3 p-4 text-left transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[(0,r.jsx)(t,{className:"h-5 w-5 text-slate-400"}),(0,r.jsx)("span",{className:"flex-1 font-medium text-slate-900 dark:text-white",children:a}),s&&(0,r.jsx)("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:s}),(0,r.jsx)(g.Z,{className:"h-5 w-5 text-slate-400"})]})}function C(e){let{title:t,message:a,confirmLabel:s,onConfirm:n,onCancel:l,variant:i="default"}=e;return(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:(0,r.jsxs)("div",{className:"w-full max-w-sm rounded-2xl bg-white p-6 shadow-xl dark:bg-slate-800",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:t}),(0,r.jsx)("p",{className:"mt-2 text-sm text-slate-500 dark:text-slate-400",children:a}),(0,r.jsxs)("div",{className:"mt-6 flex gap-3",children:[(0,r.jsx)(y.z,{variant:"secondary",className:"flex-1",onClick:l,children:"Cancel"}),(0,r.jsx)(y.z,{variant:"danger"===i?"danger":"primary",className:"flex-1",onClick:n,children:s})]})]})})}},9174:function(e,t,a){"use strict";a.d(t,{$M:function(){return l},Ct:function(){return n},as:function(){return i}});var r=a(7437);a(2265);var s=a(1001);function n(e){let{className:t,variant:a="default",size:n="md",...l}=e;return(0,r.jsx)("span",{className:(0,s.cn)("inline-flex items-center rounded-full font-medium",{default:"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-300",success:"bg-success-100 text-success-700 dark:bg-success-900/30 dark:text-success-400",warning:"bg-warning-100 text-warning-700 dark:bg-warning-900/30 dark:text-warning-400",danger:"bg-danger-100 text-danger-700 dark:bg-danger-900/30 dark:text-danger-400",info:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"}[a],{sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm"}[n],t),...l})}function l(e){let{severity:t,className:a}=e,{variant:s,label:l}={low:{variant:"success",label:"Low"},medium:{variant:"warning",label:"Medium"},high:{variant:"danger",label:"High"},critical:{variant:"danger",label:"Critical"}}[t];return(0,r.jsxs)(n,{variant:s,className:a,children:[l," Severity"]})}function i(e){let{cropType:t,className:a}=e;return(0,r.jsx)(n,{variant:"default",className:(0,s.cn)("capitalize",a),children:t})}},9820:function(e,t,a){"use strict";a.d(t,{Ol:function(){return i},Zb:function(){return l},aY:function(){return o},ll:function(){return c}});var r=a(7437),s=a(2265),n=a(1001);let l=s.forwardRef((e,t)=>{let{className:a,variant:s="default",...l}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl p-4",{default:"bg-white dark:bg-slate-800 shadow-card",bordered:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700",elevated:"bg-white dark:bg-slate-800 shadow-soft"}[s],a),...l})});l.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("mb-4",a),...s})});i.displayName="CardHeader";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("text-lg font-semibold text-slate-900 dark:text-white",a),...s})});c.displayName="CardTitle",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-slate-500 dark:text-slate-400",a),...s})}).displayName="CardDescription";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("",a),...s})});o.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("mt-4 flex items-center",a),...s})}).displayName="CardFooter"},6154:function(e,t,a){"use strict";a.d(t,{t:function(){return l}});var r=a(3011),s=a(6885);let n=(e,t)=>({id:"user_".concat(Date.now()),email:e,name:t,phone:"",avatar:"",farmName:"",location:"Ashanti Region, Ghana",cropTypes:["cocoa","cassava"],preferredLanguage:"en",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),l=(0,r.U)()((0,s.tJ)((e,t)=>({user:null,isAuthenticated:!1,isLoading:!1,error:null,login:async(t,a)=>(e({isLoading:!0,error:null}),await new Promise(e=>setTimeout(e,1e3)),t&&a)?a.length<6?(e({isLoading:!1,error:"Invalid credentials"}),!1):(e({user:n(t,t.split("@")[0]),isAuthenticated:!0,isLoading:!1,error:null}),!0):(e({isLoading:!1,error:"Email and password are required"}),!1),signup:async t=>(e({isLoading:!0,error:null}),await new Promise(e=>setTimeout(e,1500)),t.email&&t.password&&t.name)?t.password.length<8?(e({isLoading:!1,error:"Password must be at least 8 characters"}),!1):(e({user:{id:"user_".concat(Date.now()),email:t.email,name:t.name,phone:t.phone||"",farmName:t.farmName||"",location:t.location||"",cropTypes:t.cropTypes,preferredLanguage:"en",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},isAuthenticated:!0,isLoading:!1,error:null}),!0):(e({isLoading:!1,error:"Please fill in all required fields"}),!1),logout:()=>{e({user:null,isAuthenticated:!1,error:null})},updateUser:a=>{let{user:r}=t();r&&e({user:{...r,...a,updatedAt:new Date().toISOString()}})},setError:t=>{e({error:t})},clearError:()=>{e({error:null})},checkAuth:()=>{let{user:a}=t();e({isAuthenticated:!!a})}}),{name:"kuapa-auth",storage:(0,s.FL)(()=>localStorage),partialize:e=>({user:e.user,isAuthenticated:e.isAuthenticated})}))},5598:function(e,t,a){"use strict";a.d(t,{rG:function(){return x}});var r=a(3011),s=a(6885),n=a(960);let l="app-state",i=(0,n.X3)("kuapa-db",1,{upgrade(e){e.objectStoreNames.contains(l)||e.createObjectStore(l)}}),c={getItem:async e=>{try{return await (await i).get(l,e)||null}catch(e){return console.error("Error getting item from IndexedDB:",e),null}},setItem:async(e,t)=>{try{await (await i).put(l,t,e)}catch(e){console.error("Error setting item in IndexedDB:",e)}},removeItem:async e=>{try{await (await i).delete(l,e)}catch(e){console.error("Error removing item from IndexedDB:",e)}}};var o=a(8532);let d=async(e,t)=>{await u();let a=(0,o.Ft)(t),r=Math.random()>.3,s=null,n=0,l=[];return!r&&a.length>0?(s=a[Math.floor(Math.random()*a.length)],n=Math.floor(23*Math.random())+75,l=h(s)):(n=Math.floor(15*Math.random())+85,l=m(t)),{id:"scan_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),userId:"current_user",imageUrl:e,thumbnailUrl:e,cropType:t,detectedDisease:s,confidence:n,isHealthy:r,recommendations:l,createdAt:new Date().toISOString()}},u=()=>new Promise(e=>{setTimeout(e,1500+1500*Math.random())}),h=e=>{let t=[];return"critical"===e.severity?t.push("URGENT: Immediate action required to prevent spread"):"high"===e.severity&&t.push("Take action within the next few days"),e.treatment.cultural.length>0&&t.push(e.treatment.cultural[0]),e.treatment.organic.length>0&&t.push(e.treatment.organic[0]),e.prevention.length>0&&t.push("Prevention: ".concat(e.prevention[0])),("critical"===e.severity||"high"===e.severity)&&t.push("Consult with local agricultural extension officer for detailed guidance"),t},m=e=>{let t={cocoa:["Your cocoa plant looks healthy! Continue regular monitoring","Maintain proper pruning to ensure good air circulation","Apply balanced fertilizer during the growing season","Remove any debris around the tree base"],cassava:["Your cassava plant appears healthy! Keep up the good work","Continue weeding to reduce pest habitat","Monitor for whiteflies regularly","Ensure proper spacing for next planting"],maize:["Your maize crop looks healthy! Continue current practices","Monitor for signs of streak virus as plants grow","Apply nitrogen fertilizer at knee-high stage if needed","Scout for stem borers regularly"],plantain:["Your plantain looks healthy! Maintain current care","Continue regular de-suckering practices","Apply mulch around the base","Monitor older leaves for early disease signs"],rice:["Your rice crop appears healthy","Maintain proper water levels","Monitor for blast disease symptoms","Apply fertilizer according to growth stage"],tomato:["Your tomato plant looks healthy","Stake plants for better support","Water at the base to prevent leaf diseases","Remove lower leaves as fruits develop"],pepper:["Your pepper plant appears healthy","Ensure consistent watering","Monitor for aphids and whiteflies","Apply mulch to retain moisture"],other:["Your crop appears healthy","Continue regular monitoring","Maintain good agricultural practices","Consult extension services for specific advice"]};return t[e]||t.other},x=(0,r.U)()((0,s.tJ)((e,t)=>({currentScan:null,history:[],isScanning:!1,error:null,startScan:async(a,r)=>{e({isScanning:!0,error:null,currentScan:null});try{let s=await d(a,r);return e({currentScan:s,isScanning:!1}),t().addScanToHistory(s),s}catch(t){throw e({isScanning:!1,error:t instanceof Error?t.message:"Scan failed"}),t}},addScanToHistory:t=>{e(e=>({history:[t,...e.history].slice(0,100)}))},removeScan:t=>{e(e=>{var a;return{history:e.history.filter(e=>e.id!==t),currentScan:(null===(a=e.currentScan)||void 0===a?void 0:a.id)===t?null:e.currentScan}})},clearHistory:()=>{e({history:[],currentScan:null})},getScanById:e=>{let{history:a}=t();return a.find(t=>t.id===e)},setError:t=>{e({error:t})},clearError:()=>{e({error:null})}}),{name:"kuapa-scans",storage:(0,s.FL)(()=>c),partialize:e=>({history:e.history})}))}},function(e){e.O(0,[697,778,882,971,117,744],function(){return e(e.s=1068)}),_N_E=e.O()}]);